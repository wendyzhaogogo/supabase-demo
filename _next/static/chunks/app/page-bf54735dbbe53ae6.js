(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{447:(e,a,t)=>{"use strict";t.d(a,{LeadsPage:()=>N});var s=t(9768),r=t(804),n=t(9617),l=t(9758);let i=r.forwardRef((e,a)=>{let{className:t,type:r,...n}=e;return(0,s.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...n})});function d(e){let{onSubmit:a,isSubmitting:t=!1}=e,[l,d]=(0,r.useState)({name:"",role:"",company:"",linkedin_url:""}),c=e=>{let{name:a,value:t}=e.target;d(e=>({...e,[a]:t}))};return(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a(l)},className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name *"}),(0,s.jsx)(i,{id:"name",name:"name",type:"text",value:l.name,onChange:c,required:!0,className:"mt-1",placeholder:"Enter lead's name"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700",children:"Role *"}),(0,s.jsx)(i,{id:"role",name:"role",type:"text",value:l.role,onChange:c,required:!0,className:"mt-1",placeholder:"e.g., Marketing Manager"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"company",className:"block text-sm font-medium text-gray-700",children:"Company *"}),(0,s.jsx)(i,{id:"company",name:"company",type:"text",value:l.company,onChange:c,required:!0,className:"mt-1",placeholder:"Enter company name"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"linkedin_url",className:"block text-sm font-medium text-gray-700",children:"LinkedIn URL (optional)"}),(0,s.jsx)(i,{id:"linkedin_url",name:"linkedin_url",type:"url",value:l.linkedin_url,onChange:c,className:"mt-1",placeholder:"https://linkedin.com/in/..."})]}),(0,s.jsx)(n.$,{type:"submit",disabled:t,className:"w-full",children:t?"Creating Lead...":"Create Lead"})]})}i.displayName="Input";let c=(0,t(9291).F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-gray-950 focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-gray-900 text-gray-50 hover:bg-gray-800",secondary:"border-transparent bg-gray-100 text-gray-900 hover:bg-gray-200",destructive:"border-transparent bg-red-600 text-red-50 hover:bg-red-700",outline:"text-gray-900",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function o(e){let{className:a,variant:t,...r}=e;return(0,s.jsx)("div",{className:(0,l.cn)(c({variant:t}),a),...r})}var m=t(3912),x=t(3239),u=t(1838);function g(e){let{leads:a,onGenerateMessage:t,onUpdateStatus:r,isGenerating:l}=e,i=e=>{switch(e){case"draft":return(0,s.jsx)(o,{variant:"secondary",children:"Draft"});case"approved":return(0,s.jsx)(o,{variant:"success",children:"Approved"});case"sent":return(0,s.jsx)(o,{variant:"default",children:"Sent"});default:return(0,s.jsx)(o,{variant:"outline",children:"Unknown"})}},d=e=>new Date(e).toLocaleDateString();return 0===a.length?(0,s.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No leads found. Create your first lead to get started!"}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lead"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Company"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Message"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.role})]})})}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.company}),e.linkedin_url&&(0,s.jsxs)("a",{href:e.linkedin_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 flex items-center text-sm",children:[(0,s.jsx)(m.A,{className:"w-3 h-3 mr-1"}),"LinkedIn"]})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:i(e.status)}),(0,s.jsx)("td",{className:"px-6 py-4",children:e.generated_message?(0,s.jsx)("div",{className:"text-sm text-gray-900 max-w-xs truncate",children:e.generated_message}):(0,s.jsx)("span",{className:"text-gray-400 text-sm",children:"No message"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:d(e.created_at)}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[!e.generated_message&&(0,s.jsxs)(n.$,{size:"sm",onClick:()=>t(e.id),disabled:l===e.id,className:"flex items-center",children:[(0,s.jsx)(x.A,{className:"w-4 h-4 mr-1"}),l===e.id?"Generating...":"Generate"]}),e.generated_message&&"draft"===e.status&&(0,s.jsxs)(n.$,{size:"sm",variant:"outline",onClick:()=>r(e.id,"approved"),className:"flex items-center",children:[(0,s.jsx)(u.A,{className:"w-4 h-4 mr-1"}),"Approve"]}),"approved"===e.status&&(0,s.jsxs)(n.$,{size:"sm",variant:"secondary",onClick:()=>r(e.id,"sent"),className:"flex items-center",children:[(0,s.jsx)(x.A,{className:"w-4 h-4 mr-1"}),"Mark Sent"]})]})})]},e.id))})]})})}var p=t(5350),h=t(1345);let y="https://tnfdvfpnyjtdsdbmnmwk.supabase.co",f="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRuZmR2ZnBueWp0ZHNkYm1ubXdrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIyOTU3NjIsImV4cCI6MjA2Nzg3MTc2Mn0.splBk2T0LXweGkTMYG9Dtauc2TKAta34dSFVuHuEyGM";if(!y||!f)throw Error("Missing Supabase environment variables");let b=(0,h.UU)(y,f);class v{async generateMessage(e){let a=await fetch("".concat(this.baseUrl,"/api/generate-message"),{method:"POST",headers:{"Content-Type":"application/json","x-mock-data":"true"},body:JSON.stringify(e)});if(!a.ok)throw Error("Failed to generate message: ".concat(a.statusText));return a.json()}async healthCheck(){let e=await fetch("".concat(this.baseUrl,"/api/health"));if(!e.ok)throw Error("Health check failed: ".concat(e.statusText));return e.json()}constructor(){this.baseUrl="https://ai-serverless.vercel.app"}}let j=new v;function N(){let[e,a]=(0,r.useState)([]),[t,l]=(0,r.useState)(!0),[i,c]=(0,r.useState)(!1),[o,m]=(0,r.useState)(null),[x,u]=(0,r.useState)(!1);(0,r.useEffect)(()=>{h()},[]);let h=async()=>{try{let{data:e,error:t}=await b.from("leads").select("*").order("created_at",{ascending:!1});t?(console.error("Failed to fetch leads:",t),a([])):a(e||[])}catch(e){console.error("Error fetching leads:",e),a([])}finally{l(!1)}},y=async e=>{c(!0);try{let{data:t,error:s}=await b.from("leads").insert([{...e,linkedin_url:e.linkedin_url||null,status:"draft",generated_message:null}]).select().single();s?(console.error("Failed to create lead:",s),alert("Failed to create lead. Please try again.")):(a(e=>[t,...e]),u(!1))}catch(e){console.error("Error creating lead:",e),alert("Error creating lead. Please try again.")}finally{c(!1)}},f=async t=>{let s=e.find(e=>e.id===t);if(s){m(t);try{let e=await j.generateMessage({name:s.name,role:s.role,company:s.company});if(e.success&&e.data.message){let{data:t,error:r}=await b.from("leads").update({generated_message:e.data.message,updated_at:new Date().toISOString()}).eq("id",s.id).select().single();r?(console.error("Failed to update lead with generated message:",r),alert("Generated message but failed to save. Please try again.")):a(e=>e.map(e=>e.id===s.id?t:e))}}catch(e){console.error("Error generating message:",e),alert("Failed to generate message. Please try again.")}finally{m(null)}}},v=async(e,t)=>{try{let{data:s,error:r}=await b.from("leads").update({status:t,updated_at:new Date().toISOString()}).eq("id",e).select().single();r?(console.error("Failed to update status:",r),alert("Failed to update status. Please try again.")):a(a=>a.map(a=>a.id===e?s:a))}catch(e){console.error("Error updating status:",e),alert("Error updating status. Please try again.")}};return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"AI Lead Builder"}),(0,s.jsx)("p",{className:"mt-2 text-gray-600",children:"Generate personalized LinkedIn outreach messages for your leads"})]}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)(n.$,{onClick:()=>u(!x),className:"flex items-center gap-2",children:[(0,s.jsx)(p.A,{className:"h-4 w-4"}),"Add New Lead"]})}),x&&(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)(d,{onSubmit:y,isSubmitting:i})}),t?(0,s.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Loading leads..."}):(0,s.jsx)(g,{leads:e,onGenerateMessage:f,onUpdateStatus:v,isGenerating:o})]})})}},3029:(e,a,t)=>{Promise.resolve().then(t.bind(t,447))},9617:(e,a,t)=>{"use strict";t.d(a,{$:()=>d});var s=t(9768),r=t(804),n=t(9291),l=t(9758);let i=(0,n.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-gray-900 text-gray-50 hover:bg-gray-800",destructive:"bg-red-600 text-red-50 hover:bg-red-700",outline:"border border-gray-300 bg-white hover:bg-gray-50",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200",ghost:"hover:bg-gray-100",link:"text-gray-900 underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,a)=>{let{className:t,variant:r,size:n,...d}=e;return(0,s.jsx)("button",{className:(0,l.cn)(i({variant:r,size:n,className:t})),ref:a,...d})});d.displayName="Button"},9758:(e,a,t)=>{"use strict";t.d(a,{cn:()=>n});var s=t(2067),r=t(7671);function n(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,r.QP)((0,s.$)(a))}}},e=>{var a=a=>e(e.s=a);e.O(0,[113,814,633,47,358],()=>a(3029)),_N_E=e.O()}]);